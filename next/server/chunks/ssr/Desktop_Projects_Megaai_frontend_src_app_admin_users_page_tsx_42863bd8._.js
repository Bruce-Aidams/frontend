module.exports=[51433,a=>{"use strict";var b=a.i(68361),c=a.i(54590),d=a.i(46221),e=a.i(71509),f=a.i(72063),g=a.i(39646),h=a.i(17520),i=a.i(22181),j=a.i(75055),k=a.i(39118),l=a.i(9947),m=a.i(4806),n=a.i(37754);let o=(0,a.i(24877).default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);var p=a.i(67373),q=a.i(41736),r=a.i(18400),s=a.i(18165),t=a.i(29064),u=a.i(83497),v=a.i(59278),w=a.i(77039),x=a.i(1636),y=a.i(65707),z=a.i(88623),A=a.i(51902),B=a.i(13988),C=a.i(88552),D=a.i(36405);function E(){let[a,E]=(0,c.useState)([]),[F,G]=(0,c.useState)(!0),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)("all"),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(!1),[P,Q]=(0,c.useState)(!1),[R,S]=(0,c.useState)(!1),[T,U]=(0,c.useState)(null),[V,W]=(0,c.useState)({name:"",email:"",phone:"",role:"user",is_active:!0,wallet_balance:"0",password:""}),[X,Y]=(0,c.useState)({type:"credit",amount:"",note:""}),Z=(0,c.useCallback)(async()=>{G(!0);try{let a={};H&&(a.search=H),"all"!==J&&(a.role=J);let b=await d.default.get("/admin/users",{params:a});E(b.data.data)}catch(a){console.error("Fetch Users Error:",a),D.toast.error("Failed to load users")}finally{G(!1)}},[H,J]);(0,c.useEffect)(()=>{let a=setTimeout(Z,500);return()=>clearTimeout(a)},[Z]);let $=async()=>{try{await d.default.post("/admin/users",V),D.toast.success("User created successfully"),M(!1),Z()}catch(a){D.toast.error(a.response?.data?.message||"Failed to create user")}},_=async()=>{if(T)try{await d.default.put(`/admin/users/${T.id}`,V),D.toast.success("User updated successfully"),O(!1),Z()}catch(a){D.toast.error(a.response?.data?.message||"Failed to update user")}},aa=async()=>{if(T)try{await d.default.delete(`/admin/users/${T.id}`),D.toast.success("User deleted successfully"),Q(!1),Z()}catch(a){D.toast.error(a.response?.data?.message||"Failed to delete user")}},ab=async()=>{if(T){if(!X.amount||!X.note)return void D.toast.error("Please fill all adjustment fields");try{await d.default.post(`/admin/users/${T.id}/adjust-wallet`,X),D.toast.success("Wallet adjusted successfully"),S(!1),Z()}catch(a){D.toast.error(a.response?.data?.message||"Failed to adjust wallet")}}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-3xl font-bold tracking-tight text-slate-800 dark:text-slate-100",children:"User Management"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage accounts, roles, and platform security."})]}),(0,b.jsxs)(e.Button,{onClick:()=>{W({name:"",email:"",phone:"",role:"user",is_active:!0,wallet_balance:"0",password:""}),M(!0)},className:"gap-2 shadow-lg shadow-primary/20",children:[(0,b.jsx)(A.UserPlus,{className:"w-4 h-4"})," Add New User"]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(p.Search,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-400"}),(0,b.jsx)(j.Input,{placeholder:"Search by name, email, or phone...",className:"pl-9 bg-white dark:bg-slate-900 border-none shadow-sm",value:H,onChange:a=>I(a.target.value)})]}),(0,b.jsxs)(m.Select,{value:J,onValueChange:K,children:[(0,b.jsx)(m.SelectTrigger,{className:"w-full sm:w-[150px] bg-white dark:bg-slate-900 border-none shadow-sm",children:(0,b.jsx)(m.SelectValue,{placeholder:"All Roles"})}),(0,b.jsxs)(m.SelectContent,{children:[(0,b.jsx)(m.SelectItem,{value:"all",children:"All Roles"}),(0,b.jsx)(m.SelectItem,{value:"admin",children:"Admin"}),(0,b.jsx)(m.SelectItem,{value:"agent",children:"Agent"}),(0,b.jsx)(m.SelectItem,{value:"user",children:"User"})]})]})]}),(0,b.jsx)(f.Card,{className:"border-none shadow-xl bg-white/80 dark:bg-slate-900/80 backdrop-blur-md overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,b.jsx)("thead",{className:"text-xs uppercase bg-slate-100/50 dark:bg-slate-800/50 text-slate-500 font-bold border-b dark:border-slate-800",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4",children:"User Details"}),(0,b.jsx)("th",{className:"px-6 py-4",children:"Role & Balance"}),(0,b.jsx)("th",{className:"px-6 py-4",children:"Security Status"}),(0,b.jsx)("th",{className:"px-6 py-4",children:"Registration"}),(0,b.jsx)("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:F&&0===a.length?(0,b.jsx)("tr",{children:(0,b.jsxs)("td",{colSpan:5,className:"px-6 py-12 text-center text-slate-400",children:[(0,b.jsx)(x.RefreshCcw,{className:"w-8 h-8 animate-spin mx-auto mb-2 opacity-20"}),"Loading users..."]})}):0===a.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"px-6 py-12 text-center text-slate-400 italic",children:"No users found matching your search."})}):a.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-slate-50/50 dark:hover:bg-slate-800/30 transition-colors group",children:[(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(h.Avatar,{className:"h-10 w-10 border-2 border-white dark:border-slate-800 shadow-md",children:(0,b.jsx)(h.AvatarFallback,{className:"bg-primary/10 text-primary font-bold",children:a.name.charAt(0).toUpperCase()})}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:a.name}),(0,b.jsxs)("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:[(0,b.jsx)(s.Mail,{className:"w-3 h-3"})," ",a.email]}),a.phone&&(0,b.jsxs)("span",{className:"text-[10px] text-slate-400 flex items-center gap-1",children:[(0,b.jsx)(C.Phone,{className:"w-3 h-3"})," ",a.phone]})]})]})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("div",{className:"flex items-center gap-1.5",children:"admin"===a.role?(0,b.jsxs)(i.Badge,{className:"bg-purple-100 text-purple-700 hover:bg-purple-100 dark:bg-purple-900/30 dark:text-purple-400 border-none gap-1",children:[(0,b.jsx)(q.Shield,{className:"w-3 h-3"})," Admin"]}):"agent"===a.role?(0,b.jsxs)(i.Badge,{className:"bg-blue-100 text-blue-700 hover:bg-blue-100 dark:bg-blue-900/30 dark:text-blue-400 border-none gap-1",children:[(0,b.jsx)(r.User,{className:"w-3 h-3"})," Agent"]}):(0,b.jsx)(i.Badge,{variant:"outline",className:"border-slate-200 dark:border-slate-700 text-slate-500 font-medium capitalize",children:a.role})}),(0,b.jsxs)("div",{className:"text-xs font-bold text-slate-600 dark:text-slate-400 flex items-center gap-1",children:[(0,b.jsx)(B.Wallet,{className:"w-3 h-3"})," ₵",parseFloat(String(a.wallet_balance)).toFixed(2)]})]})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("div",{className:"flex items-center gap-2",children:a.is_active?(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-green-600 dark:text-green-400 font-medium",children:[(0,b.jsx)(t.CheckCircle,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"text-xs",children:"Active"})]}):(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-red-500 font-medium",children:[(0,b.jsx)(u.XCircle,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"text-xs",children:"Suspended"})]})})}),(0,b.jsx)("td",{className:"px-6 py-4 text-xs text-slate-400 font-medium",children:new Date(a.created_at).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}),(0,b.jsx)("td",{className:"px-6 py-4 text-right",children:(0,b.jsxs)(k.DropdownMenu,{children:[(0,b.jsx)(k.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-slate-100 dark:hover:bg-slate-800",children:(0,b.jsx)(o,{className:"h-4 w-4"})})}),(0,b.jsxs)(k.DropdownMenuContent,{align:"end",className:"w-48",children:[(0,b.jsx)(k.DropdownMenuLabel,{children:"Account Actions"}),(0,b.jsx)(k.DropdownMenuSeparator,{}),(0,b.jsxs)(k.DropdownMenuItem,{onClick:()=>{U(a),W({name:a.name,email:a.email,phone:a.phone||"",role:a.role,is_active:!!a.is_active,wallet_balance:String(a.wallet_balance),password:""}),O(!0)},className:"cursor-pointer",children:[(0,b.jsx)(v.Key,{className:"w-4 h-4 mr-2"})," Edit / Reset Key"]}),(0,b.jsxs)(k.DropdownMenuItem,{onClick:()=>{U(a),Y({type:"credit",amount:"",note:""}),S(!0)},className:"cursor-pointer text-primary font-bold",children:[(0,b.jsx)(y.Plus,{className:"w-4 h-4 mr-2"})," Manual Adjustment"]}),(0,b.jsxs)(k.DropdownMenuItem,{onClick:()=>{U(a),Q(!0)},className:"text-red-500 hover:text-red-600 cursor-pointer",disabled:"admin"===a.role,children:[(0,b.jsx)(z.Trash2,{className:"w-4 h-4 mr-2"})," Delete Account"]})]})]})})]},a.id))})]})})}),(0,b.jsx)(l.Dialog,{open:L,onOpenChange:M,children:(0,b.jsxs)(l.DialogContent,{className:"sm:max-w-[450px] dark:bg-slate-900 border-none",children:[(0,b.jsxs)(l.DialogHeader,{children:[(0,b.jsx)(l.DialogTitle,{className:"text-2xl font-bold",children:"New User Account"}),(0,b.jsx)(l.DialogDescription,{children:"Create a new member, agent, or administrator."})]}),(0,b.jsxs)("div",{className:"grid gap-5 py-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(n.Label,{htmlFor:"name",className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:"Full Name"}),(0,b.jsx)(j.Input,{id:"name",placeholder:"e.g. John Doe",value:V.name,onChange:a=>W({...V,name:a.target.value}),className:"h-11 border-slate-200 dark:border-slate-800"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(n.Label,{htmlFor:"email",className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:"Email Address"}),(0,b.jsx)(j.Input,{id:"email",type:"email",placeholder:"john@example.com",value:V.email,onChange:a=>W({...V,email:a.target.value}),className:"h-11 border-slate-200 dark:border-slate-800"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(n.Label,{htmlFor:"phone",className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:"Phone Number"}),(0,b.jsx)(j.Input,{id:"phone",placeholder:"024XXXXXXX",value:V.phone,onChange:a=>W({...V,phone:a.target.value}),className:"h-11 border-slate-200 dark:border-slate-800"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(n.Label,{className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:"Role"}),(0,b.jsxs)(m.Select,{value:V.role,onValueChange:a=>W({...V,role:a}),children:[(0,b.jsx)(m.SelectTrigger,{className:"h-11 border-slate-200 dark:border-slate-800",children:(0,b.jsx)(m.SelectValue,{placeholder:"Select role"})}),(0,b.jsxs)(m.SelectContent,{children:[(0,b.jsx)(m.SelectItem,{value:"user",children:"User / Member"}),(0,b.jsx)(m.SelectItem,{value:"agent",children:"Agent / Reseller"}),(0,b.jsx)(m.SelectItem,{value:"admin",children:"Administrator"})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(n.Label,{htmlFor:"password",className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:"Password"}),(0,b.jsx)(g.PasswordInput,{id:"password",placeholder:"••••••••",value:V.password,onChange:a=>W({...V,password:a.target.value}),className:"h-11 border-slate-200 dark:border-slate-800"})]})]})]}),(0,b.jsxs)(l.DialogFooter,{children:[(0,b.jsx)(e.Button,{variant:"ghost",onClick:()=>M(!1),children:"Cancel"}),(0,b.jsx)(e.Button,{onClick:$,className:"shadow-lg shadow-primary/20",children:"Create Account"})]})]})}),(0,b.jsx)(l.Dialog,{open:N,onOpenChange:O,children:(0,b.jsxs)(l.DialogContent,{className:"sm:max-w-[450px] dark:bg-slate-900 border-none",children:[(0,b.jsxs)(l.DialogHeader,{children:[(0,b.jsx)(l.DialogTitle,{className:"text-2xl font-bold",children:"Edit Account"}),(0,b.jsxs)(l.DialogDescription,{children:["Profile settings for ",T?.name,"."]})]}),(0,b.jsxs)("div",{className:"grid gap-5 py-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(n.Label,{htmlFor:"edit-name",className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:"Full Name"}),(0,b.jsx)(j.Input,{id:"edit-name",value:V.name,onChange:a=>W({...V,name:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(n.Label,{htmlFor:"edit-email",className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:"Email"}),(0,b.jsx)(j.Input,{id:"edit-email",value:V.email,onChange:a=>W({...V,email:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(n.Label,{className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:"Role"}),(0,b.jsxs)(m.Select,{value:V.role,onValueChange:a=>W({...V,role:a}),children:[(0,b.jsx)(m.SelectTrigger,{children:(0,b.jsx)(m.SelectValue,{placeholder:"Select role"})}),(0,b.jsxs)(m.SelectContent,{children:[(0,b.jsx)(m.SelectItem,{value:"user",children:"User"}),(0,b.jsx)(m.SelectItem,{value:"agent",children:"Agent"}),(0,b.jsx)(m.SelectItem,{value:"admin",children:"Admin"})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(n.Label,{className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:"Status"}),(0,b.jsxs)(m.Select,{value:V.is_active?"active":"inactive",onValueChange:a=>W({...V,is_active:"active"===a}),children:[(0,b.jsx)(m.SelectTrigger,{children:(0,b.jsx)(m.SelectValue,{})}),(0,b.jsxs)(m.SelectContent,{children:[(0,b.jsx)(m.SelectItem,{value:"active",children:"Active"}),(0,b.jsx)(m.SelectItem,{value:"inactive",children:"Suspended"})]})]})]})]}),(0,b.jsxs)("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-xl space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-wider text-primary",children:[(0,b.jsx)(v.Key,{className:"w-3.5 h-3.5"})," Security Override"]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(n.Label,{htmlFor:"edit-password",className:"text-[10px] text-muted-foreground uppercase",children:"New Password (leave blank to keep current)"}),(0,b.jsx)(g.PasswordInput,{id:"edit-password",placeholder:"••••••••",value:V.password,onChange:a=>W({...V,password:a.target.value}),className:"bg-white dark:bg-slate-900 border-none shadow-sm"})]})]})]}),(0,b.jsxs)(l.DialogFooter,{children:[(0,b.jsx)(e.Button,{variant:"ghost",onClick:()=>O(!1),children:"Cancel"}),(0,b.jsx)(e.Button,{onClick:_,className:"shadow-lg shadow-primary/20",children:"Update Account"})]})]})}),(0,b.jsx)(l.Dialog,{open:P,onOpenChange:Q,children:(0,b.jsxs)(l.DialogContent,{className:"sm:max-w-[400px] border-none",children:[(0,b.jsxs)(l.DialogHeader,{children:[(0,b.jsxs)(l.DialogTitle,{className:"flex items-center gap-2 text-red-600",children:[(0,b.jsx)(w.AlertTriangle,{className:"w-5 h-5"})," Delete User?"]}),(0,b.jsxs)(l.DialogDescription,{className:"pt-2",children:["Are you sure you want to delete ",(0,b.jsx)("span",{className:"font-bold text-slate-900 dark:text-slate-100",children:T?.name}),"? This action is permanent and will remove all their data."]})]}),(0,b.jsxs)(l.DialogFooter,{className:"mt-4",children:[(0,b.jsx)(e.Button,{variant:"ghost",onClick:()=>Q(!1),children:"Cancel"}),(0,b.jsx)(e.Button,{variant:"destructive",onClick:aa,children:"Confirm Delete"})]})]})}),(0,b.jsx)(l.Dialog,{open:R,onOpenChange:S,children:(0,b.jsxs)(l.DialogContent,{className:"sm:max-w-[425px] border-none",children:[(0,b.jsxs)(l.DialogHeader,{children:[(0,b.jsxs)(l.DialogTitle,{className:"text-2xl font-bold flex items-center gap-2",children:[(0,b.jsx)(B.Wallet,{className:"w-6 h-6 text-primary"})," Wallet Adjustment"]}),(0,b.jsxs)(l.DialogDescription,{children:["Manually credit or debit ",(0,b.jsx)("span",{className:"font-bold text-slate-900 dark:text-slate-100",children:T?.name}),"'s account."]})]}),(0,b.jsxs)("div",{className:"grid gap-5 py-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(n.Label,{className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:"Adjustment Type"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(e.Button,{variant:"credit"===X.type?"default":"outline",className:"flex-1 rounded-xl",onClick:()=>Y({...X,type:"credit"}),children:[(0,b.jsx)(y.Plus,{className:"w-4 h-4 mr-2 text-emerald-500"})," Credit"]}),(0,b.jsxs)(e.Button,{variant:"debit"===X.type?"destructive":"outline",className:"flex-1 rounded-xl",onClick:()=>Y({...X,type:"debit"}),children:[(0,b.jsx)(u.XCircle,{className:"w-4 h-4 mr-2"})," Debit"]})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(n.Label,{htmlFor:"adj-amount",className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:"Amount (GHS)"}),(0,b.jsx)(j.Input,{id:"adj-amount",type:"number",placeholder:"0.00",value:X.amount,onChange:a=>Y({...X,amount:a.target.value}),className:"h-12 text-lg font-bold border-slate-200 dark:border-slate-800"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(n.Label,{htmlFor:"adj-note",className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:"Reason / Reference Note"}),(0,b.jsx)(j.Input,{id:"adj-note",placeholder:"e.g. Loyalty bonus, Offline top-up correction",value:X.note,onChange:a=>Y({...X,note:a.target.value}),className:"h-11 border-slate-200 dark:border-slate-800"})]})]}),(0,b.jsxs)(l.DialogFooter,{children:[(0,b.jsx)(e.Button,{variant:"ghost",onClick:()=>S(!1),children:"Cancel"}),(0,b.jsx)(e.Button,{onClick:ab,className:"shadow-lg shadow-primary/20 min-w-32",children:"Apply Change"})]})]})})]})}a.s(["default",()=>E],51433)}];

//# sourceMappingURL=Desktop_Projects_Megaai_frontend_src_app_admin_users_page_tsx_42863bd8._.js.map