module.exports=[77676,a=>{"use strict";var b=a.i(68361),c=a.i(54590),d=a.i(46221),e=a.i(71509),f=a.i(75055),g=a.i(9947),h=a.i(37754),i=a.i(72063),j=a.i(43313),k=a.i(4806),l=a.i(65707),m=a.i(88623),n=a.i(64213),o=a.i(53906),p=a.i(24877);let q=(0,p.default)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);var r=a.i(27312);let s=(0,p.default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var t=a.i(77039),u=a.i(1636),v=a.i(67373),w=a.i(36405),x=a.i(21045),y=a.i(15943);function z(){return(0,b.jsxs)(i.Card,{className:"rounded-3xl border-none shadow-sm overflow-hidden",children:[(0,b.jsx)("div",{className:"h-44 bg-slate-100 dark:bg-slate-800 relative",children:(0,b.jsx)(y.Skeleton,{className:"w-full h-full"})}),(0,b.jsxs)(i.CardHeader,{className:"pb-3 space-y-2",children:[(0,b.jsx)(y.Skeleton,{className:"h-6 w-3/4"}),(0,b.jsx)(y.Skeleton,{className:"h-8 w-1/2"})]}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)(y.Skeleton,{className:"h-8 w-24 rounded-xl"})}),(0,b.jsxs)(i.CardFooter,{className:"gap-3 pt-2 pb-6 px-6",children:[(0,b.jsx)(y.Skeleton,{className:"h-9 flex-1 rounded-xl"}),(0,b.jsx)(y.Skeleton,{className:"h-9 w-9 rounded-xl"})]})]})}function A(){let[a,p]=(0,c.useState)([]),[y,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(!0),[F,G]=(0,c.useState)(null),[H,I]=(0,c.useState)({network:"",name:"",price:"",cost_price:"",data_amount:"",role_prices:{dealer:"",super_agent:""}}),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)(null),N=(0,c.useRef)(null),[O,P]=(0,c.useState)(""),[Q,R]=(0,c.useState)(null),S=(0,c.useCallback)(async()=>{E(!0),R(null);try{let a=await d.default.get("/admin/products");p(a.data)}catch(c){console.error("Fetch Products Error:",c);let a=c.response?.data?.debug,b=c.response?.data?.message||c.message;c.response?.status===403?R("Access Denied: You do not have permission to view this page."):R(a?`${b} (${a})`:b),w.toast.error("Failed to load products")}finally{E(!1)}},[]);if((0,c.useEffect)(()=>{S()},[S]),Q)return(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] gap-6 text-center animate-in fade-in zoom-in duration-500",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-red-50 dark:bg-red-900/10 rounded-full flex items-center justify-center",children:(0,b.jsx)(t.AlertTriangle,{className:"w-10 h-10 text-red-500"})}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h3",{className:"text-xl font-bold",children:"Access Denied or Error"}),(0,b.jsx)("p",{className:"text-muted-foreground max-w-md mx-auto",children:Q})]}),(0,b.jsxs)(e.Button,{onClick:S,variant:"outline",className:"gap-2",children:[(0,b.jsx)(u.RefreshCcw,{className:"w-4 h-4"})," Try Again"]})]});let T=async()=>{try{let a=new FormData;a.append("network",H.network),a.append("name",H.name),a.append("price",H.price),a.append("cost_price",H.cost_price),a.append("data_amount",H.data_amount),a.append("role_prices",JSON.stringify({dealer:H.role_prices.dealer||null,super_agent:H.role_prices.super_agent||null})),J&&a.append("image",J),B&&F?(a.append("_method","PUT"),await d.default.post(`/admin/products/${F}`,a,{headers:{"Content-Type":"multipart/form-data"}})):await d.default.post("/admin/products",a,{headers:{"Content-Type":"multipart/form-data"}}),A(!1),V(),S()}catch(a){alert("Error saving product")}},U=async b=>{if(confirm("Are you sure you want to delete this bundle? This action cannot be undone."))try{await d.default.delete(`/admin/products/${b}`),p(a.filter(a=>a.id!==b))}catch(a){alert("Failed to delete")}},V=()=>{I({network:"",name:"",price:"",cost_price:"",data_amount:"",role_prices:{dealer:"",super_agent:""}}),K(null),M(null),C(!1),G(null)},W=a=>{let c=a.toUpperCase();return c.includes("MTN")?{bg:"bg-yellow-400",text:"text-black",border:"border-yellow-400",lightBg:"bg-yellow-400/10",accent:"yellow-400",icon:(0,b.jsx)(o.Signal,{className:"w-4 h-4 text-yellow-600"})}:c.includes("TELECEL")?{bg:"bg-red-600",text:"text-white",border:"border-red-600",lightBg:"bg-red-600/10",accent:"red-600",icon:(0,b.jsx)(o.Signal,{className:"w-4 h-4 text-red-600"})}:c.includes("AIRTEL")||c.includes("TIGO")||"AT"===c?{bg:"bg-blue-600",text:"text-white",border:"border-blue-600",lightBg:"bg-blue-600/10",accent:"blue-600",icon:(0,b.jsx)(o.Signal,{className:"w-4 h-4 text-blue-600"})}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-500",lightBg:"bg-slate-500/10",accent:"slate-500",icon:(0,b.jsx)(o.Signal,{className:"w-4 h-4 text-slate-500"})}},X=a.filter(a=>a.name.toLowerCase().includes(O.toLowerCase())||a.network.toLowerCase().includes(O.toLowerCase())||a.data_amount?.toLowerCase().includes(O.toLowerCase())).reduce((a,b)=>{let c=b.network.toUpperCase();return a[c]||(a[c]=[]),a[c].push(b),a},{}),Y=Object.keys(X);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold tracking-tight text-slate-800 dark:text-slate-100",children:"Product Management"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage data bundles and pricing."})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[(0,b.jsxs)("div",{className:"relative flex-1 md:w-64",children:[(0,b.jsx)(v.Search,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-slate-400"}),(0,b.jsx)(f.Input,{placeholder:"Search products...",className:"pl-9 bg-white dark:bg-slate-900",value:O,onChange:a=>P(a.target.value)})]}),(0,b.jsxs)(g.Dialog,{open:y,onOpenChange:a=>{A(a),a||V()},children:[(0,b.jsx)(g.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(e.Button,{className:"gap-2 shadow-lg shadow-indigo-500/20 whitespace-nowrap",children:[(0,b.jsx)(l.Plus,{className:"w-4 h-4"})," Add Bundle"]})}),(0,b.jsxs)(g.DialogContent,{className:"sm:max-w-[500px] max-h-[85vh] overflow-y-auto",children:[(0,b.jsxs)(g.DialogHeader,{children:[(0,b.jsx)(g.DialogTitle,{children:B?"Edit Bundle":"Add New Bundle"}),(0,b.jsx)(g.DialogDescription,{children:B?"Update package details.":"Create a new data package using MB units (will be shown as GB if > 1024)."})]}),(0,b.jsxs)("div",{className:"py-4 space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-sm font-medium leading-none border-b pb-2 text-muted-foreground",children:"Basic Information"}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,b.jsxs)("div",{className:"w-24 h-24 rounded-2xl bg-slate-100 dark:bg-slate-800 border-2 border-dashed border-slate-300 dark:border-slate-700 flex items-center justify-center overflow-hidden cursor-pointer hover:border-primary transition-colors relative group",onClick:()=>N.current?.click(),children:[L?(0,b.jsx)("img",{src:L,alt:"Preview",className:"w-full h-full object-cover"}):(0,b.jsxs)("div",{className:"text-center p-2 text-slate-400",children:[(0,b.jsx)(r.Upload,{className:"w-6 h-6 mx-auto mb-1"}),(0,b.jsx)("span",{className:"text-[10px]",children:"Upload"})]}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,b.jsx)(n.Edit,{className:"w-6 h-6 text-white"})})]}),(0,b.jsx)("input",{type:"file",ref:N,className:"hidden",accept:"image/*",onChange:a=>{let b=a.target.files?.[0];b&&(K(b),M(URL.createObjectURL(b)))}})]}),(0,b.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"network",children:"Network Provider"}),(0,b.jsxs)(k.Select,{value:H.network,onValueChange:a=>I({...H,network:a}),children:[(0,b.jsx)(k.SelectTrigger,{className:"bg-gray-50 dark:bg-slate-900 border-none h-9",children:(0,b.jsx)(k.SelectValue,{placeholder:"Select Network"})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"MTN",children:"MTN"}),(0,b.jsx)(k.SelectItem,{value:"Telecel",children:"Telecel"}),(0,b.jsx)(k.SelectItem,{value:"AirtelTigo",children:"AirtelTigo"})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"name",children:"Bundle Name"}),(0,b.jsx)(f.Input,{id:"name",placeholder:"e.g. 1GB Super Saver",value:H.name,onChange:a=>I({...H,name:a.target.value}),className:"h-9"})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"data_amount",children:"Data Amount"}),(0,b.jsx)(f.Input,{id:"data_amount",placeholder:"e.g. 5.5 GB",value:H.data_amount,onChange:a=>I({...H,data_amount:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-sm font-medium leading-none border-b pb-2 text-muted-foreground",children:"Pricing Strategy"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"price",className:"text-green-600 dark:text-green-400",children:"Selling Price (GHS)"}),(0,b.jsx)(f.Input,{id:"price",type:"number",placeholder:"0.00",value:H.price,onChange:a=>I({...H,price:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"cost_price",className:"text-slate-500",children:"Cost Price (GHS)"}),(0,b.jsx)(f.Input,{id:"cost_price",type:"number",placeholder:"0.00",value:H.cost_price,onChange:a=>I({...H,cost_price:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsxs)(h.Label,{htmlFor:"dealer_price",className:"text-purple-600",children:["Dealer Price ",(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"(Opt)"})]}),(0,b.jsx)(f.Input,{id:"dealer_price",type:"number",placeholder:"Same as Selling",value:H.role_prices.dealer,onChange:a=>I({...H,role_prices:{...H.role_prices,dealer:a.target.value}})})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsxs)(h.Label,{htmlFor:"super_agent_price",className:"text-orange-600",children:["Super Agent ",(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"(Opt)"})]}),(0,b.jsx)(f.Input,{id:"super_agent_price",type:"number",placeholder:"Same as Selling",value:H.role_prices.super_agent,onChange:a=>I({...H,role_prices:{...H.role_prices,super_agent:a.target.value}})})]})]})]})]}),(0,b.jsxs)(g.DialogFooter,{children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>A(!1),children:"Cancel"}),(0,b.jsx)(e.Button,{onClick:T,children:B?"Update Bundle":"Create Bundle"})]})]})]})]})]}),(0,b.jsxs)(j.Tabs,{defaultValue:Y[0]||"all",className:"w-full",children:[(0,b.jsx)("div",{className:"bg-white dark:bg-slate-900 p-1.5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-800 mb-8 inline-block min-w-full md:min-w-0",children:(0,b.jsx)(j.TabsList,{className:"bg-transparent h-auto gap-2 p-0 flex-wrap justify-start",children:Y.map(a=>(W(a),(0,b.jsxs)(j.TabsTrigger,{value:a,className:(0,x.cn)("px-6 py-2.5 rounded-xl font-bold transition-all gap-2 border-2 border-transparent","data-[state=active]:bg-white dark:data-[state=active]:bg-slate-800 data-[state=active]:shadow-md","MTN"===a?"data-[state=active]:border-yellow-400 data-[state=active]:text-yellow-700":"TELECEL"===a?"data-[state=active]:border-red-600 data-[state=active]:text-red-600":"data-[state=active]:border-blue-600 data-[state=active]:text-blue-600"),children:[(0,b.jsx)(q,{className:"w-4 h-4"})," ",a]},a)))})}),Y.map(a=>(0,b.jsx)(j.TabsContent,{value:a,className:"mt-6",children:(0,b.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:D?Array.from({length:4}).map((a,c)=>(0,b.jsx)(z,{},c)):X[a].map(a=>{let c=W(a.network);return(0,b.jsxs)(i.Card,{className:(0,x.cn)("border-none shadow-sm overflow-hidden hover:shadow-xl transition-all group relative rounded-3xl","before:absolute before:inset-0 before:bg-gradient-to-b before:from-transparent before:to-black/5 before:opacity-0 hover:before:opacity-100 transition-opacity"),children:[(0,b.jsxs)("div",{className:"h-44 bg-slate-100 dark:bg-slate-800 relative overflow-hidden",children:[a.image_path?(0,b.jsx)("img",{src:`${"http://localhost:8000/api".replace("/api","")}/storage/${a.image_path}`,alt:a.name,className:"w-full h-full object-cover transition-transform group-hover:scale-110 duration-700"}):(0,b.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center text-slate-300",children:[(0,b.jsx)(s,{className:"w-12 h-12 mb-2"}),(0,b.jsx)("span",{className:"text-[10px] uppercase font-bold tracking-tighter",children:"No Image"})]}),(0,b.jsx)("div",{className:(0,x.cn)("absolute top-4 right-4 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest shadow-lg",c.bg,c.text),children:a.network})]}),(0,b.jsx)(i.CardHeader,{className:"pb-3",children:(0,b.jsxs)(i.CardTitle,{className:"flex flex-col gap-1 items-start",children:[(0,b.jsx)("span",{className:"text-lg font-black tracking-tight",children:a.name}),(0,b.jsxs)("span",{className:(0,x.cn)("text-2xl font-black",`text-${c.accent}`),children:["GHS ",a.price]})]})}),(0,b.jsx)(i.CardContent,{children:(0,b.jsxs)("div",{className:(0,x.cn)("flex items-center gap-2 px-3 py-1.5 rounded-xl w-fit text-sm font-bold transition-colors",c.lightBg),children:[c.icon,(0,b.jsx)("span",{className:"yellow-400"===c.accent?"text-yellow-700":`text-${c.accent}`,children:a.data_amount?isNaN(Number(a.data_amount))?a.data_amount:Number(a.data_amount)>=1024?`${(Number(a.data_amount)/1024).toFixed(2)} GB`:`${a.data_amount} MB`:"No data specified"})]})}),(0,b.jsxs)(i.CardFooter,{className:"gap-3 pt-2 pb-6 px-6",children:[(0,b.jsxs)(e.Button,{variant:"secondary",className:"flex-1 gap-2 rounded-xl font-bold bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700",size:"sm",onClick:()=>{I({network:a.network,name:a.name,price:a.price.toString(),cost_price:a.cost_price.toString(),data_amount:a.data_amount||"",role_prices:{dealer:a.role_prices?.dealer?.toString()||"",super_agent:a.role_prices?.super_agent?.toString()||""}}),M(a.image_path?`${"http://localhost:8000/api".replace("/api","")}/storage/${a.image_path}`:null),G(a.id),C(!0),A(!0)},children:[(0,b.jsx)(n.Edit,{className:"w-3.5 h-3.5"})," Edit"]}),(0,b.jsx)(e.Button,{variant:"destructive",size:"icon",className:"shrink-0 rounded-xl shadow-lg shadow-red-500/20",onClick:()=>U(a.id),children:(0,b.jsx)(m.Trash2,{className:"w-3.5 h-3.5"})})]})]},a.id)})})},a))]})]})}a.s(["default",()=>A],77676)}];

//# sourceMappingURL=Desktop_Projects_Megaai_frontend_src_app_admin_products_page_tsx_3029eced._.js.map