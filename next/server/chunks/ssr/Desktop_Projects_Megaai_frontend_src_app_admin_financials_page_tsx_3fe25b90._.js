module.exports=[8714,a=>{"use strict";var b=a.i(68361),c=a.i(54590),d=a.i(46221),e=a.i(71509),f=a.i(72063),g=a.i(75055),h=a.i(37754),i=a.i(43313),j=a.i(11088),k=a.i(16328),l=a.i(34384),m=a.i(49294),n=a.i(67862),o=a.i(24877);let p=(0,o.default)("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),q=(0,o.default)("settings-2",[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);var r=a.i(36405),s=a.i(99922),t=a.i(89393),u=a.i(528);function v(){let[a,o]=(0,c.useState)({}),[v,w]=(0,c.useState)({summary:{},orders:[]}),[x,y]=(0,c.useState)(!0),[z,A]=(0,c.useState)({from:new Date(new Date().setDate(new Date().getDate()-30)),to:new Date}),B=(0,c.useCallback)(async()=>{y(!0);try{let a=await d.default.get("/admin/settings");o(a.data);let b={};z?.from&&(b.start_date=(0,s.format)(z.from,"yyyy-MM-dd")),z?.to&&(b.end_date=(0,s.format)(z.to,"yyyy-MM-dd"));let c=await d.default.get("/admin/sales-report",{params:b});w(c.data)}catch(a){r.toast.error("Failed to load financial data")}finally{y(!1)}},[z]);(0,c.useEffect)(()=>{B()},[B]);let C=async b=>{b.preventDefault();try{await d.default.post("/admin/settings",{settings:a}),r.toast.success("Settings updated successfully")}catch(a){r.toast.error("Update failed")}};return(0,b.jsxs)("div",{className:"space-y-8 pb-10",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-3xl font-black tracking-tight text-slate-800 dark:text-slate-100",children:"Financial Insights"}),(0,b.jsx)("p",{className:"text-muted-foreground font-medium",children:"Manage economics, pricing, and performance audit."})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(t.Popover,{children:[(0,b.jsx)(t.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(e.Button,{variant:"outline",className:"h-11 rounded-2xl border-slate-200 dark:border-slate-800 font-bold px-4",children:[(0,b.jsx)(k.TrendingUp,{className:"w-4 h-4 mr-2"}),z?.from?z.to?(0,b.jsxs)(b.Fragment,{children:[(0,s.format)(z.from,"LLL dd")," - ",(0,s.format)(z.to,"LLL dd")]}):(0,s.format)(z.from,"LLL dd"):(0,b.jsx)("span",{children:"Select Range"})]})}),(0,b.jsx)(t.PopoverContent,{className:"w-auto p-0",align:"end",children:(0,b.jsx)(u.Calendar,{initialFocus:!0,mode:"range",selected:z,onSelect:A,numberOfMonths:2})})]}),(0,b.jsxs)(e.Button,{onClick:()=>{let a=encodeURI("data:text/csv;charset=utf-8,Date,User,Bundle,Selling Price,Cost Price,Profit\n"+v.orders.map(a=>[(0,s.format)(new Date(a.created_at),"yyyy-MM-dd HH:mm"),a.user.name,a.bundle.name,a.cost,a.cost_price,a.profit]).map(a=>a.join(",")).join("\n")),b=document.createElement("a");b.setAttribute("href",a),b.setAttribute("download",`sales_report_${(0,s.format)(new Date,"yyyy-MM-dd")}.csv`),document.body.appendChild(b),b.click(),document.body.removeChild(b)},className:"h-11 rounded-2xl gap-2 font-bold px-6 shadow-lg shadow-primary/20",children:[(0,b.jsx)(n.Download,{className:"w-4 h-4"})," Export CSV"]})]})]}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsxs)(f.Card,{className:"rounded-[2rem] border-none shadow-sm bg-indigo-50/50 dark:bg-indigo-900/10",children:[(0,b.jsx)(f.CardHeader,{className:"pb-2",children:(0,b.jsx)(f.CardTitle,{className:"text-xs font-black uppercase tracking-widest text-indigo-500",children:"Total Sales"})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsxs)("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:["₵",parseFloat(v.summary.total_sales||0).toFixed(2)]}),(0,b.jsxs)("p",{className:"text-xs font-bold text-indigo-400 mt-1 flex items-center gap-1",children:[(0,b.jsx)(l.ShoppingCart,{className:"w-3 h-3"})," ",v.summary.order_count," Orders fulfilled"]})]})]}),(0,b.jsxs)(f.Card,{className:"rounded-[2rem] border-none shadow-sm bg-emerald-50/50 dark:bg-emerald-900/10",children:[(0,b.jsx)(f.CardHeader,{className:"pb-2",children:(0,b.jsx)(f.CardTitle,{className:"text-xs font-black uppercase tracking-widest text-emerald-500",children:"Gross Profit"})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsxs)("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:["₵",parseFloat(v.summary.total_profit||0).toFixed(2)]}),(0,b.jsxs)("p",{className:"text-xs font-bold text-emerald-400 mt-1 flex items-center gap-1",children:[(0,b.jsx)(k.TrendingUp,{className:"w-3 h-3"})," Potential Net Gain"]})]})]}),(0,b.jsxs)(f.Card,{className:"rounded-[2rem] border-none shadow-sm bg-rose-50/50 dark:bg-rose-900/10",children:[(0,b.jsx)(f.CardHeader,{className:"pb-2",children:(0,b.jsx)(f.CardTitle,{className:"text-xs font-black uppercase tracking-widest text-rose-500",children:"Direct Cost"})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsxs)("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:["₵",parseFloat(v.summary.total_cost||0).toFixed(2)]}),(0,b.jsxs)("p",{className:"text-xs font-bold text-rose-400 mt-1 flex items-center gap-1",children:[(0,b.jsx)(p,{className:"w-3 h-3"})," Total Bundle Expense"]})]})]}),(0,b.jsxs)(f.Card,{className:"rounded-[2rem] border-none shadow-sm bg-amber-50/50 dark:bg-amber-900/10",children:[(0,b.jsx)(f.CardHeader,{className:"pb-2",children:(0,b.jsx)(f.CardTitle,{className:"text-xs font-black uppercase tracking-widest text-amber-500",children:"Avg. Margin"})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsxs)("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:[v.summary.total_sales>0?(v.summary.total_profit/v.summary.total_sales*100).toFixed(1):0,"%"]}),(0,b.jsxs)("p",{className:"text-xs font-bold text-amber-500 mt-1 flex items-center gap-1",children:[(0,b.jsx)(m.ArrowUpRight,{className:"w-3 h-3"})," Performance Index"]})]})]})]}),(0,b.jsxs)(i.Tabs,{defaultValue:"report",className:"w-full",children:[(0,b.jsxs)(i.TabsList,{className:"bg-slate-100 dark:bg-slate-900 h-14 p-1.5 rounded-2xl gap-2 w-full md:w-auto",children:[(0,b.jsx)(i.TabsTrigger,{value:"report",className:"rounded-xl px-10 font-bold data-[state=active]:bg-white dark:data-[state=active]:bg-slate-800 data-[state=active]:shadow-sm",children:"Detailed Report"}),(0,b.jsx)(i.TabsTrigger,{value:"settings",className:"rounded-xl px-10 font-bold data-[state=active]:bg-white dark:data-[state=active]:bg-slate-800 data-[state=active]:shadow-sm",children:"Financial Settings"})]}),(0,b.jsx)(i.TabsContent,{value:"report",className:"mt-8",children:(0,b.jsxs)(f.Card,{className:"rounded-[2.5rem] border-none shadow-xl overflow-hidden",children:[(0,b.jsxs)(f.CardHeader,{className:"bg-white/50 dark:bg-slate-900/50 backdrop-blur-md p-8 border-b border-slate-50 dark:border-slate-800",children:[(0,b.jsx)(f.CardTitle,{className:"text-xl font-black",children:"Settled Sales Log"}),(0,b.jsx)(f.CardDescription,{children:"Individual order metrics for the selected period."})]}),(0,b.jsx)(f.CardContent,{className:"p-0",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(j.Table,{children:[(0,b.jsx)(j.TableHeader,{children:(0,b.jsxs)(j.TableRow,{className:"bg-slate-50/30 dark:bg-slate-900/30 border-none",children:[(0,b.jsx)(j.TableHead,{className:"px-8 py-5 text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Order Ref"}),(0,b.jsx)(j.TableHead,{className:"px-8 py-5 text-[10px] font-black uppercase tracking-widest text-slate-400",children:"User"}),(0,b.jsx)(j.TableHead,{className:"px-8 py-5 text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Bundle"}),(0,b.jsx)(j.TableHead,{className:"px-8 py-5 text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Selling (₵)"}),(0,b.jsx)(j.TableHead,{className:"px-8 py-5 text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Cost (₵)"}),(0,b.jsx)(j.TableHead,{className:"px-8 py-5 text-[10px] font-black uppercase tracking-widest text-slate-400 text-right",children:"Profit (₵)"})]})}),(0,b.jsx)(j.TableBody,{children:0===v.orders.length?(0,b.jsx)(j.TableRow,{children:(0,b.jsx)(j.TableCell,{colSpan:6,className:"h-64 text-center text-slate-400 italic font-medium",children:"No settled sales recorded for this period."})}):v.orders.map(a=>(0,b.jsxs)(j.TableRow,{className:"hover:bg-slate-50 dark:hover:bg-slate-800/20 transition-all border-slate-50 dark:border-slate-800",children:[(0,b.jsxs)(j.TableCell,{className:"px-8 py-6 font-mono text-xs text-slate-400",children:["#",a.reference]}),(0,b.jsx)(j.TableCell,{className:"px-8 py-6",children:(0,b.jsx)("div",{className:"font-bold text-slate-800 dark:text-slate-200",children:a.user.name})}),(0,b.jsx)(j.TableCell,{className:"px-8 py-6",children:(0,b.jsx)("div",{className:"font-bold text-slate-800 dark:text-slate-200",children:a.bundle.name})}),(0,b.jsx)(j.TableCell,{className:"px-8 py-6 font-black text-slate-900 dark:text-white",children:parseFloat(a.cost).toFixed(2)}),(0,b.jsx)(j.TableCell,{className:"px-8 py-6 font-bold text-slate-400",children:parseFloat(a.cost_price).toFixed(2)}),(0,b.jsx)(j.TableCell,{className:"px-8 py-6 text-right",children:(0,b.jsxs)("span",{className:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 px-3 py-1 rounded-full font-black text-xs",children:["+",parseFloat(a.profit).toFixed(2)]})})]},a.id))})]})})})]})}),(0,b.jsx)(i.TabsContent,{value:"settings",className:"mt-8",children:(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,b.jsxs)(f.Card,{className:"rounded-[2.5rem] border-none shadow-xl",children:[(0,b.jsxs)(f.CardHeader,{className:"p-8",children:[(0,b.jsxs)(f.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(l.ShoppingCart,{className:"w-5 h-5 text-primary"})," Payment Limits"]}),(0,b.jsx)(f.CardDescription,{children:"Restrict top-up amounts for platform security."})]}),(0,b.jsxs)(f.CardContent,{className:"p-8 pt-0 space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{children:"Minimum Wallet Top-up (₵)"}),(0,b.jsx)(g.Input,{type:"number",value:a.min_payment,onChange:b=>o({...a,min_payment:b.target.value}),className:"h-12 rounded-xl bg-slate-50 dark:bg-slate-900 border-none"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{children:"Maximum Wallet Top-up (₵)"}),(0,b.jsx)(g.Input,{type:"number",value:a.max_payment,onChange:b=>o({...a,max_payment:b.target.value}),className:"h-12 rounded-xl bg-slate-50 dark:bg-slate-900 border-none"})]})]})]}),(0,b.jsxs)(f.Card,{className:"rounded-[2.5rem] border-none shadow-xl",children:[(0,b.jsxs)(f.CardHeader,{className:"p-8",children:[(0,b.jsxs)(f.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(k.TrendingUp,{className:"w-5 h-5 text-primary"})," Service Charges"]}),(0,b.jsx)(f.CardDescription,{children:"Configure platform fees for manual or automated processing."})]}),(0,b.jsxs)(f.CardContent,{className:"p-8 pt-0 space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{children:"Charge Type"}),(0,b.jsxs)("select",{className:"h-12 rounded-xl bg-slate-50 dark:bg-slate-900 border-none px-4 text-sm font-medium",value:a.charge_type,onChange:b=>o({...a,charge_type:b.target.value}),children:[(0,b.jsx)("option",{value:"percentage",children:"Percentage (%)"}),(0,b.jsx)("option",{value:"fixed",children:"Fixed Amount (₵)"})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{children:"Charge Value"}),(0,b.jsx)(g.Input,{type:"number",value:a.charge_value,onChange:b=>o({...a,charge_value:b.target.value}),className:"h-12 rounded-xl bg-slate-50 dark:bg-slate-900 border-none"})]})]})]}),(0,b.jsxs)(f.Card,{className:"rounded-[2.5rem] border-none shadow-xl md:col-span-2",children:[(0,b.jsxs)(f.CardHeader,{className:"p-8",children:[(0,b.jsxs)(f.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(q,{className:"w-5 h-5 text-primary"})," Manual Payment Details"]}),(0,b.jsx)(f.CardDescription,{children:"Bank account information displayed to users for manual transfers."})]}),(0,b.jsxs)(f.CardContent,{className:"p-8 pt-0 grid md:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{children:"Bank Name"}),(0,b.jsx)(g.Input,{value:a.bank_name,onChange:b=>o({...a,bank_name:b.target.value}),className:"h-12 rounded-xl bg-slate-50 dark:bg-slate-900 border-none"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{children:"Account Holder Name"}),(0,b.jsx)(g.Input,{value:a.bank_account_name,onChange:b=>o({...a,bank_account_name:b.target.value}),className:"h-12 rounded-xl bg-slate-50 dark:bg-slate-900 border-none"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{children:"Account Number"}),(0,b.jsx)(g.Input,{value:a.bank_account_number,onChange:b=>o({...a,bank_account_number:b.target.value}),className:"h-12 rounded-xl bg-slate-50 dark:bg-slate-900 border-none"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{children:"Maintenance Mode"}),(0,b.jsxs)("select",{className:"h-12 rounded-xl bg-slate-50 dark:bg-slate-900 border-none px-4 text-sm font-medium",value:a.maintenance_mode||"false",onChange:b=>o({...a,maintenance_mode:b.target.value}),children:[(0,b.jsx)("option",{value:"false",children:"Live (Public)"}),(0,b.jsx)("option",{value:"true",children:"Maintenance Mode (Admins Only)"})]})]})]}),(0,b.jsx)(f.CardFooter,{className:"p-8 border-t border-slate-50 dark:border-slate-800",children:(0,b.jsx)(e.Button,{onClick:C,className:"w-full md:w-auto px-10 h-12 rounded-xl font-bold",children:"Save Financial Configuration"})})]})]})})]})]})}a.s(["default",()=>v],8714)}];

//# sourceMappingURL=Desktop_Projects_Megaai_frontend_src_app_admin_financials_page_tsx_3fe25b90._.js.map