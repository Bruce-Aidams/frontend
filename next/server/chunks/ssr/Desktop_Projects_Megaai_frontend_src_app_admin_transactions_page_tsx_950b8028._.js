module.exports=[98123,a=>{"use strict";var b=a.i(68361),c=a.i(54590),d=a.i(46221),e=a.i(72063),f=a.i(22181),g=a.i(71509),h=a.i(11088),i=a.i(39118),j=a.i(24877);let k=(0,j.default)("arrow-down-left",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);var l=a.i(49294),m=a.i(67373),n=a.i(80940),o=a.i(13763),p=a.i(18400),q=a.i(75088),r=a.i(16328);let s=(0,j.default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);var t=a.i(64109),u=a.i(67862);let v=(0,j.default)("file-braces",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]),w=(0,j.default)("sheet",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"3",x2:"21",y1:"15",y2:"15",key:"o2sbyz"}],["line",{x1:"9",x2:"9",y1:"9",y2:"21",key:"1ib60c"}],["line",{x1:"15",x2:"15",y1:"9",y2:"21",key:"1n26ft"}]]);var x=a.i(78620),y=a.i(75055),z=a.i(17520),A=a.i(94366),B=a.i(99922),C=a.i(21045),D=a.i(36405),E=a.i(81694),F=a.i(68987);function G(){let[a,j]=(0,c.useState)([]),[G,H]=(0,c.useState)(!0),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)(null),[M,N]=(0,c.useState)(null),[O,P]=(0,c.useState)(null),[Q,R]=(0,c.useState)(!1),[S,T]=(0,c.useState)(null);(0,c.useEffect)(()=>{d.default.get("/admin/transactions").then(a=>j(a.data.data)).catch(a=>{console.error(a),D.toast.error("Failed to fetch transactions")}).finally(()=>H(!1))},[]);let U=a.filter(a=>{let b=a.reference?.toLowerCase().includes(I.toLowerCase())||a.description?.toLowerCase().includes(I.toLowerCase())||a.user?.name?.toLowerCase().includes(I.toLowerCase())||a.user?.email?.toLowerCase().includes(I.toLowerCase()),c=!K||a.type===K,d=!M||a.status===M;return b&&c&&d}),V=a.filter(a=>"credit"===a.type&&"success"===a.status).reduce((a,b)=>a+Number(b.amount),0),W=a.filter(a=>"debit"===a.type&&"success"===a.status).reduce((a,b)=>a+Number(b.amount),0),X=a=>{if(0===U.length)return void D.toast.error("No data to export");if("json"===a){let a=new Blob([JSON.stringify(U,null,2)],{type:"application/json"}),b=URL.createObjectURL(a),c=document.createElement("a");c.href=b,c.download=`transactions_${(0,B.format)(new Date,"yyyy-MM-dd")}.json`,c.click(),URL.revokeObjectURL(b),D.toast.success("JSON Exported successfully")}else{let a=new Blob([["Date,Reference,Customer,Email,Type,Amount,Status,Description",...U.map(a=>[(0,B.format)(new Date(a.created_at),"yyyy-MM-dd HH:mm"),a.reference,a.user?.name||"Unknown",a.user?.email||"N/A",a.type,Number(a.amount).toFixed(2),a.status,`"${a.description.replace(/"/g,'""')}"`].join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),b=URL.createObjectURL(a),c=document.createElement("a");c.href=b,c.download=`transactions_${(0,B.format)(new Date,"yyyy-MM-dd")}.csv`,c.click(),URL.revokeObjectURL(b),D.toast.success("CSV/Excel Exported successfully")}};return(0,b.jsxs)("div",{className:"space-y-8 pb-10",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-4xl font-black tracking-tighter text-slate-900 dark:text-white",children:"Financial Matrix"}),(0,b.jsx)("p",{className:"text-slate-500 font-medium",children:"Tracking every digital pesewa across the ecosystem."})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"relative w-full md:w-80 group",children:[(0,b.jsx)(m.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400 group-focus-within:text-primary transition-colors"}),(0,b.jsx)(y.Input,{placeholder:"Find reference, user, or desc...",className:"pl-11 h-12 bg-white dark:bg-slate-900 rounded-2xl border-slate-200 dark:border-slate-800 shadow-sm",value:I,onChange:a=>J(a.target.value)})]}),(0,b.jsxs)(i.DropdownMenu,{children:[(0,b.jsx)(i.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(g.Button,{variant:"outline",className:"h-12 rounded-2xl border-slate-200 dark:border-slate-800 font-bold px-6 gap-2",children:[(0,b.jsx)(u.Download,{className:"w-4 h-4"}),"Export"]})}),(0,b.jsxs)(i.DropdownMenuContent,{align:"end",className:"w-48 rounded-2xl border-none shadow-2xl p-2",children:[(0,b.jsx)(i.DropdownMenuLabel,{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Export Formats"}),(0,b.jsx)(i.DropdownMenuSeparator,{}),(0,b.jsxs)(i.DropdownMenuItem,{onClick:()=>X("csv"),className:"rounded-xl gap-3 font-bold cursor-pointer italic px-4 py-3",children:[(0,b.jsx)(w,{className:"w-4 h-4 text-emerald-500"})," Excel / CSV"]}),(0,b.jsxs)(i.DropdownMenuItem,{onClick:()=>X("json"),className:"rounded-xl gap-3 font-bold cursor-pointer italic px-4 py-3",children:[(0,b.jsx)(v,{className:"w-4 h-4 text-indigo-500"})," JSON Format"]})]})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-3",children:[(0,b.jsxs)(e.Card,{className:"border-none shadow-xl shadow-slate-200/50 dark:shadow-none bg-white dark:bg-slate-900/50 rounded-[2rem] p-6 flex items-center gap-5",children:[(0,b.jsx)("div",{className:"w-14 h-14 bg-emerald-100 text-emerald-600 rounded-2xl flex items-center justify-center shrink-0",children:(0,b.jsx)(r.TrendingUp,{className:"w-7 h-7"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Total Inflow"}),(0,b.jsxs)("h3",{className:"text-2xl font-black text-slate-900 dark:text-white",children:["₵ ",V.toLocaleString(void 0,{minimumFractionDigits:2})]})]})]}),(0,b.jsxs)(e.Card,{className:"border-none shadow-xl shadow-slate-200/50 dark:shadow-none bg-white dark:bg-slate-900/50 rounded-[2rem] p-6 flex items-center gap-5",children:[(0,b.jsx)("div",{className:"w-14 h-14 bg-rose-100 text-rose-600 rounded-2xl flex items-center justify-center shrink-0",children:(0,b.jsx)(s,{className:"w-7 h-7"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Total Outflow"}),(0,b.jsxs)("h3",{className:"text-2xl font-black text-slate-900 dark:text-white",children:["₵ ",W.toLocaleString(void 0,{minimumFractionDigits:2})]})]})]}),(0,b.jsxs)(e.Card,{className:"border-none shadow-xl shadow-slate-200/50 dark:shadow-none bg-indigo-600 text-white rounded-[2rem] p-6 flex items-center gap-5",children:[(0,b.jsx)("div",{className:"w-14 h-14 bg-white/20 text-white rounded-2xl flex items-center justify-center shrink-0 backdrop-blur-md",children:(0,b.jsx)(t.Activity,{className:"w-7 h-7"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] font-black uppercase tracking-widest text-white/60",children:"Net Volume"}),(0,b.jsxs)("h3",{className:"text-2xl font-black",children:["₵ ",(V-W).toLocaleString(void 0,{minimumFractionDigits:2})]})]})]})]}),(0,b.jsxs)(e.Card,{className:"sneat-card border-none shadow-2xl shadow-slate-200/50 dark:shadow-none dark:bg-slate-900/50 rounded-[2.5rem] overflow-hidden",children:[(0,b.jsx)(e.CardHeader,{className:"p-8 border-b border-slate-50 dark:border-slate-800 bg-white/50 dark:bg-slate-900/50 backdrop-blur-md",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(e.CardTitle,{className:"text-xl font-black",children:"Detailed Ledgers"}),(0,b.jsx)(e.CardDescription,{children:"Auditable history of all system movements."})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)("div",{className:"flex bg-slate-100 dark:bg-slate-800 p-1 rounded-xl",children:["credit","debit"].map(a=>(0,b.jsx)("button",{onClick:()=>L(K===a?null:a),className:(0,C.cn)("px-4 py-1.5 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all",K===a?"bg-white dark:bg-slate-700 text-primary shadow-sm":"text-slate-400 hover:text-slate-600"),children:a},a))}),(0,b.jsx)("div",{className:"flex bg-slate-100 dark:bg-slate-800 p-1 rounded-xl",children:["success","failed","pending"].map(a=>(0,b.jsx)("button",{onClick:()=>N(M===a?null:a),className:(0,C.cn)("px-4 py-1.5 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all",M===a?"bg-white dark:bg-slate-700 text-primary shadow-sm":"text-slate-400 hover:text-slate-600"),children:a},a))})]})]})}),(0,b.jsx)(e.CardContent,{className:"p-0",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{className:"bg-slate-50/50 dark:bg-slate-900/50 border-none",children:[(0,b.jsx)(h.TableHead,{className:"px-8 py-5 text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Transaction Info"}),(0,b.jsx)(h.TableHead,{className:"px-8 py-5 text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Associated User"}),(0,b.jsx)(h.TableHead,{className:"px-8 py-5 text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Movement"}),(0,b.jsx)(h.TableHead,{className:"px-8 py-5 text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Value"}),(0,b.jsx)(h.TableHead,{className:"px-8 py-5 text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Status"}),(0,b.jsx)(h.TableHead,{className:"px-8 py-5 text-[10px] font-black uppercase tracking-widest text-slate-400 text-right",children:"Actions"})]})}),(0,b.jsx)(h.TableBody,{children:G?[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(h.TableRow,{className:"animate-pulse border-slate-50 dark:border-slate-800",children:(0,b.jsx)(h.TableCell,{colSpan:6,className:"h-20",children:(0,b.jsx)("div",{className:"w-full h-8 bg-slate-100 dark:bg-slate-800 rounded-xl"})})},c)):0===U.length?(0,b.jsx)(h.TableRow,{children:(0,b.jsx)(h.TableCell,{colSpan:6,className:"text-center py-20 text-slate-400 italic",children:"Financial record empty."})}):U.map(a=>(0,b.jsxs)(h.TableRow,{className:"group hover:bg-slate-50 dark:hover:bg-slate-800/20 transition-all border-slate-100 dark:border-slate-800",children:[(0,b.jsx)(h.TableCell,{className:"px-8 py-6",children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"font-mono text-[10px] font-black text-slate-300 group-hover:text-primary transition-colors",children:a.reference||"SYSTEM_GEN"}),(0,b.jsx)("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-300 truncate max-w-[180px]",children:a.description}),(0,b.jsx)("span",{className:"text-[9px] font-medium text-slate-400",children:(0,B.format)(new Date(a.created_at),"MMM dd, HH:mm")})]})}),(0,b.jsx)(h.TableCell,{className:"px-8 py-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(z.Avatar,{className:"h-10 w-10 border-2 border-white dark:border-slate-800 shadow-sm ring-1 ring-slate-100 dark:ring-slate-800 group-hover:ring-primary/30 transition-all",children:(0,b.jsx)(z.AvatarFallback,{className:"bg-slate-100 text-slate-600 font-black text-xs uppercase",children:a.user?.name.charAt(0)||"U"})}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"font-black text-slate-900 dark:text-white leading-tight",children:a.user?.name||"Customer"}),(0,b.jsx)("span",{className:"text-[10px] font-medium text-slate-400 leading-tight",children:a.user?.email})]})]})}),(0,b.jsx)(h.TableCell,{className:"px-8 py-6",children:(0,b.jsxs)("div",{className:(0,C.cn)("inline-flex items-center gap-2 px-3 py-1 rounded-xl text-[10px] font-black uppercase tracking-widest","credit"===a.type?"bg-emerald-50 text-emerald-600 dark:bg-emerald-900/20 dark:text-emerald-400":"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400"),children:["credit"===a.type?(0,b.jsx)(l.ArrowUpRight,{className:"w-3.5 h-3.5"}):(0,b.jsx)(k,{className:"w-3.5 h-3.5"}),a.type]})}),(0,b.jsx)(h.TableCell,{className:"px-8 py-6",children:(0,b.jsxs)("span",{className:(0,C.cn)("text-lg font-black tracking-tight","credit"===a.type?"text-emerald-600":"text-slate-900 dark:text-white"),children:["credit"===a.type?"+":"-"," ₵ ",Number(a.amount).toFixed(2)]})}),(0,b.jsx)(h.TableCell,{className:"px-8 py-6",children:(0,b.jsx)(f.Badge,{variant:"outline",className:(0,C.cn)("rounded-full px-3 py-0.5 border shadow-none font-black text-[10px] uppercase tracking-widest","success"===a.status?"bg-emerald-50 text-emerald-600 border-emerald-100 dark:bg-emerald-900/30":"failed"===a.status?"bg-rose-50 text-rose-600 border-rose-100 dark:bg-rose-900/30":"bg-amber-50 text-amber-600 border-amber-100 dark:bg-amber-900/30"),children:a.status})}),(0,b.jsx)(h.TableCell,{className:"px-8 py-6 text-right",children:(0,b.jsxs)(i.DropdownMenu,{children:[(0,b.jsx)(i.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(g.Button,{variant:"ghost",className:"h-10 w-10 p-0 rounded-2xl hover:bg-slate-100 dark:hover:bg-slate-800",children:(0,b.jsx)(n.MoreHorizontal,{className:"h-5 w-5"})})}),(0,b.jsxs)(i.DropdownMenuContent,{align:"end",className:"w-56 p-2 rounded-[1.5rem] border-none shadow-2xl",children:[(0,b.jsx)(i.DropdownMenuLabel,{className:"font-black text-[10px] uppercase tracking-widest text-slate-400",children:"Treasury View"}),(0,b.jsx)(i.DropdownMenuSeparator,{className:"opacity-50"}),(0,b.jsxs)(i.DropdownMenuItem,{disabled:!a.order_id,onClick:()=>{P(a.order_id),R(!0)},className:"rounded-xl px-4 py-3 gap-3 font-bold cursor-pointer",children:[(0,b.jsx)(o.FileText,{className:"w-4 h-4 text-emerald-500"}),"View Order Invoice"]}),(0,b.jsxs)(i.DropdownMenuItem,{className:"rounded-xl px-4 py-3 gap-3 font-bold cursor-pointer",children:[(0,b.jsx)(p.User,{className:"w-4 h-4 text-primary"}),"Customer Profile"]}),(0,b.jsxs)(i.DropdownMenuItem,{onClick:()=>T(a),className:"rounded-xl px-4 py-3 gap-3 font-bold cursor-pointer",children:[(0,b.jsx)(q.CreditCard,{className:"w-4 h-4 text-indigo-500"}),"Payment Details"]})]})]})})]},a.id))})]})})})]}),(0,b.jsx)(A.InvoiceDialog,{orderId:O,open:Q,onOpenChange:R}),(0,b.jsx)(F.AnimatePresence,{children:S&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:(0,b.jsxs)(E.motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-slate-900 rounded-[2.5rem] w-full max-w-2xl shadow-2xl overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-8 border-b border-slate-100 dark:border-slate-800 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-xl font-black",children:"Transaction Audit"}),(0,b.jsx)("p",{className:"text-xs text-slate-500 font-medium",children:"Source data from gateway/system"})]}),(0,b.jsx)(g.Button,{variant:"ghost",className:"rounded-2xl h-12 w-12",onClick:()=>T(null),children:(0,b.jsx)(x.X,{className:"w-6 h-6"})})]}),(0,b.jsx)("div",{className:"p-8 max-h-[60vh] overflow-auto",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl",children:[(0,b.jsx)("p",{className:"text-[10px] font-black uppercase text-slate-400",children:"Reference"}),(0,b.jsx)("p",{className:"font-mono text-sm font-bold",children:S.reference})]}),(0,b.jsxs)("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl",children:[(0,b.jsx)("p",{className:"text-[10px] font-black uppercase text-slate-400",children:"Status"}),(0,b.jsx)(f.Badge,{className:"mt-1",children:S.status})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] font-black uppercase text-slate-400 mb-2",children:"Raw Metadata"}),(0,b.jsx)("pre",{className:"p-4 bg-slate-900 text-emerald-400 rounded-2xl text-xs font-mono overflow-auto h-64",children:JSON.stringify(S.metadata,null,2)})]})]})}),(0,b.jsx)("div",{className:"p-8 border-t border-slate-100 dark:border-slate-800 flex justify-end",children:(0,b.jsx)(g.Button,{variant:"secondary",className:"rounded-xl px-8",onClick:()=>T(null),children:"Close Audit"})})]})})})]})}a.s(["default",()=>G],98123)}];

//# sourceMappingURL=Desktop_Projects_Megaai_frontend_src_app_admin_transactions_page_tsx_950b8028._.js.map